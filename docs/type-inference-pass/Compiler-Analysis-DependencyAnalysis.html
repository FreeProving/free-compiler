<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Compiler.Analysis.DependencyAnalysis</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Compiler.Analysis.DependencyAnalysis.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">haskellToCoqCompiler-0.1.0.0: A Haskell to Coq compiler.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Compiler.Analysis.DependencyAnalysis</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Strongly connected components</a></li><li><a href="#g:2">Grouping dependencies</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains functions to identify strongly connected components
   of the dependency graph.</p><p>The dependency analysis is necessary because Coq does not allow functions
   and data types to be used before they have been declared and we need to
   identify (mutually) recursive functions. It is also used to translate
   modules in the right order.</p><p>The dependency analysis does not test whether there are undefined
   identifiers. This is done by the resolver pass of the compiler pipeline.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:DependencyComponent">DependencyComponent</a> decl<ul class="subs"><li>= <a href="#v:NonRecursive">NonRecursive</a> decl</li><li>| <a href="#v:Recursive">Recursive</a> [decl]</li></ul></li><li class="src short"><a href="#v:unwrapComponent">unwrapComponent</a> :: <a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl -&gt; [decl]</li><li class="src short"><a href="#v:mapComponent">mapComponent</a> :: ([decl] -&gt; [decl']) -&gt; <a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl -&gt; <a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl'</li><li class="src short"><a href="#v:mapComponentM">mapComponentM</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> m =&gt; ([decl] -&gt; m [decl']) -&gt; <a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl -&gt; m (<a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl')</li><li class="src short"><a href="#v:mapComponentM_">mapComponentM_</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> m =&gt; ([decl] -&gt; m a) -&gt; <a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl -&gt; m ()</li><li class="src short"><a href="#v:groupDependencies">groupDependencies</a> :: <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> decl -&gt; [<a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl]</li><li class="src short"><a href="#v:groupTypeDecls">groupTypeDecls</a> :: [<a href="Compiler-IR-Syntax.html#t:TypeDecl" title="Compiler.IR.Syntax">TypeDecl</a>] -&gt; [<a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> <a href="Compiler-IR-Syntax.html#t:TypeDecl" title="Compiler.IR.Syntax">TypeDecl</a>]</li><li class="src short"><a href="#v:groupFuncDecls">groupFuncDecls</a> :: [<a href="Compiler-IR-Syntax.html#t:FuncDecl" title="Compiler.IR.Syntax">FuncDecl</a>] -&gt; [<a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> <a href="Compiler-IR-Syntax.html#t:FuncDecl" title="Compiler.IR.Syntax">FuncDecl</a>]</li><li class="src short"><a href="#v:groupModules">groupModules</a> :: [<a href="Compiler-IR-Syntax.html#t:Module" title="Compiler.IR.Syntax">Module</a>] -&gt; [<a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> <a href="Compiler-IR-Syntax.html#t:Module" title="Compiler.IR.Syntax">Module</a>]</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Strongly connected components</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DependencyComponent" class="def">DependencyComponent</a> decl <a href="src/Compiler.Analysis.DependencyAnalysis.html#DependencyComponent" class="link">Source</a> <a href="#t:DependencyComponent" class="selflink">#</a></p><div class="doc"><p>A strongly connected component of the dependency graph.</p><p>All declarations that mutually depend on each other are in the same
   strongly connected component.</p><p>The only difference to <code><code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:SCC" title="Data.Graph">SCC</a></code> decl</code> is that the constructors
   have been renamed to be more explainatory in the context of dependency
   analysis.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NonRecursive" class="def">NonRecursive</a> decl</td><td class="doc"><p>A single non-recursive declaration.</p></td></tr><tr><td class="src"><a id="v:Recursive" class="def">Recursive</a> [decl]</td><td class="doc"><p>A list of mutually recursive declarations.</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:unwrapComponent" class="def">unwrapComponent</a> :: <a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl -&gt; [decl] <a href="src/Compiler.Analysis.DependencyAnalysis.html#unwrapComponent" class="link">Source</a> <a href="#v:unwrapComponent" class="selflink">#</a></p><div class="doc"><p>Gets the declarations wrapped by the given strongly connected component.</p></div></div><div class="top"><p class="src"><a id="v:mapComponent" class="def">mapComponent</a> :: ([decl] -&gt; [decl']) -&gt; <a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl -&gt; <a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl' <a href="src/Compiler.Analysis.DependencyAnalysis.html#mapComponent" class="link">Source</a> <a href="#v:mapComponent" class="selflink">#</a></p><div class="doc"><p>Applies the given function to the declarations in the given strongly
   connected component of the dependency graph.</p><p>In case of a <code><a href="Compiler-Analysis-DependencyAnalysis.html#v:NonRecursive" title="Compiler.Analysis.DependencyAnalysis">NonRecursive</a></code> component, the function is given a singleton
   list. The given must not change the number of declarations in the
   component.</p></div></div><div class="top"><p class="src"><a id="v:mapComponentM" class="def">mapComponentM</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> m =&gt; ([decl] -&gt; m [decl']) -&gt; <a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl -&gt; m (<a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl') <a href="src/Compiler.Analysis.DependencyAnalysis.html#mapComponentM" class="link">Source</a> <a href="#v:mapComponentM" class="selflink">#</a></p><div class="doc"><p>Monadic version of <code><a href="Compiler-Analysis-DependencyAnalysis.html#v:mapComponent" title="Compiler.Analysis.DependencyAnalysis">mapComponent</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mapComponentM_" class="def">mapComponentM_</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> m =&gt; ([decl] -&gt; m a) -&gt; <a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl -&gt; m () <a href="src/Compiler.Analysis.DependencyAnalysis.html#mapComponentM_" class="link">Source</a> <a href="#v:mapComponentM_" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Compiler-Analysis-DependencyAnalysis.html#v:mapComponentM" title="Compiler.Analysis.DependencyAnalysis">mapComponentM</a></code> but discards the result.</p></div></div><a href="#g:2" id="g:2"><h1>Grouping dependencies</h1></a><div class="top"><p class="src"><a id="v:groupDependencies" class="def">groupDependencies</a> :: <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> decl -&gt; [<a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> decl] <a href="src/Compiler.Analysis.DependencyAnalysis.html#groupDependencies" class="link">Source</a> <a href="#v:groupDependencies" class="selflink">#</a></p><div class="doc"><p>Computes the strongly connected components of the given dependency graph.</p><p>Each strongly connected component corresponds either to a set of mutually
   recursive declarations or a single non-recursive declaration.</p><p>The returned list of strongly connected components is in reverse
   topological order, i.e. a component <code>A</code> precedes another component <code>B</code> if
   <code>A</code> contains any declaration that depends on a declartion in $B$.
   If two components do not depend on each other, they are in reverse
   alphabetical order.</p></div></div><div class="top"><p class="src"><a id="v:groupTypeDecls" class="def">groupTypeDecls</a> :: [<a href="Compiler-IR-Syntax.html#t:TypeDecl" title="Compiler.IR.Syntax">TypeDecl</a>] -&gt; [<a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> <a href="Compiler-IR-Syntax.html#t:TypeDecl" title="Compiler.IR.Syntax">TypeDecl</a>] <a href="src/Compiler.Analysis.DependencyAnalysis.html#groupTypeDecls" class="link">Source</a> <a href="#v:groupTypeDecls" class="selflink">#</a></p><div class="doc"><p>Combines the construction of the dependency graphs for the given
   type declarations (See <code><a href="Compiler-Analysis-DependencyGraph.html#v:typeDependencyGraph" title="Compiler.Analysis.DependencyGraph">typeDependencyGraph</a></code>) with the computation of
   strongly connected components.</p></div></div><div class="top"><p class="src"><a id="v:groupFuncDecls" class="def">groupFuncDecls</a> :: [<a href="Compiler-IR-Syntax.html#t:FuncDecl" title="Compiler.IR.Syntax">FuncDecl</a>] -&gt; [<a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> <a href="Compiler-IR-Syntax.html#t:FuncDecl" title="Compiler.IR.Syntax">FuncDecl</a>] <a href="src/Compiler.Analysis.DependencyAnalysis.html#groupFuncDecls" class="link">Source</a> <a href="#v:groupFuncDecls" class="selflink">#</a></p><div class="doc"><p>Combines the construction of the dependency graphs for the given
   function declarations (See <code><a href="Compiler-Analysis-DependencyGraph.html#v:funcDependencyGraph" title="Compiler.Analysis.DependencyGraph">funcDependencyGraph</a></code>) with the computation
   of strongly connected components.</p></div></div><div class="top"><p class="src"><a id="v:groupModules" class="def">groupModules</a> :: [<a href="Compiler-IR-Syntax.html#t:Module" title="Compiler.IR.Syntax">Module</a>] -&gt; [<a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a> <a href="Compiler-IR-Syntax.html#t:Module" title="Compiler.IR.Syntax">Module</a>] <a href="src/Compiler.Analysis.DependencyAnalysis.html#groupModules" class="link">Source</a> <a href="#v:groupModules" class="selflink">#</a></p><div class="doc"><p>Combines the construction of the dependency graph for the given
   Haskell modules (See <code><a href="Compiler-Analysis-DependencyGraph.html#v:moduleDependencyGraph" title="Compiler.Analysis.DependencyGraph">moduleDependencyGraph</a></code>) with the computation
   of strongly connected components.</p><p>Since cyclic module dependencies are not allowed, all
   <code><a href="Compiler-Analysis-DependencyAnalysis.html#t:DependencyComponent" title="Compiler.Analysis.DependencyAnalysis">DependencyComponent</a></code>s in the returned list should be <code><a href="Compiler-Analysis-DependencyAnalysis.html#v:NonRecursive" title="Compiler.Analysis.DependencyAnalysis">NonRecursive</a></code>.
   Otherwise there is a module dependency error.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>