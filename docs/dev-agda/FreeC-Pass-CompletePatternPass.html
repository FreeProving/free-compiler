<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>FreeC.Pass.CompletePatternPass</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/FreeC.Pass.CompletePatternPass.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">free-compiler-0.2.0.0: A Haskell to Coq compiler.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">FreeC.Pass.CompletePatternPass</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains a compiler pass that checks if all function
   declarations have complete pattern matching. A pattern is complete if there
   is exactly one case alternative for each constructor of the corresponding
   type.</p><h1>Examples</h1><h2>Example 1</h2><p>The module consisting of the following declarations</p><pre>data Maybe a = Just a | Nothing

fromJust :: Maybe a -&gt; a
fromJust @a (x :: Maybe a) = case (x :: Maybe a) of {Just a -&gt; a}</pre><p>should not pass the check because the <code>case</code> expression is missing an
   alternative for the constructor <code>Nothing</code>.</p><h2>Example 2</h2><p>The following declaration with redundant alternatives</p><pre>redundant :: Just Bool -&gt; Just Bool
redundant (on :: Just Bool) = case (on :: Just Bool) of {
    Just a  -&gt; Just False;
    Nothing -&gt; Nothing;
    Just b  -&gt; Just True
  }</pre><p>should not pass the check because the <code>case</code> expression has two alternatives
   for the constructor <code>Just</code>.</p><h2>Example 3</h2><p>The following declaration where the scrutinee is a function</p><pre>case_id = case \x -&gt; x  of</pre><p>should not pass the check because functions are not permitted as scrutinees.</p><h1>Specification</h1><h2>Preconditions</h2><p>The type of all checked expressions has to be annotated.
   The environment has to contain the names of all constructors for
   all used data types.
   Additionally, the environment should contain entries for all used type
   synonyms.</p><h2>Translation</h2><p>This pass only performs a check and therefore does not change the module.</p><h2>Postconditions</h2><p>All case expressions are guaranteed to have complete pattern matching.</p><h2>Error cases</h2><p>A fatal error is reported if an incomplete case expression is found.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:completePatternPass">completePatternPass</a> :: <a href="FreeC-Pass.html#t:Pass" title="FreeC.Pass">Pass</a> <a href="FreeC-IR-Syntax-Module.html#t:Module" title="FreeC.IR.Syntax.Module">Module</a></li><li class="src short"><a href="#v:checkPatternFuncDecl">checkPatternFuncDecl</a> :: <a href="FreeC-IR-Syntax-FuncDecl.html#t:FuncDecl" title="FreeC.IR.Syntax.FuncDecl">FuncDecl</a> -&gt; <a href="FreeC-Monad-Converter.html#t:Converter" title="FreeC.Monad.Converter">Converter</a> ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:completePatternPass" class="def">completePatternPass</a> :: <a href="FreeC-Pass.html#t:Pass" title="FreeC.Pass">Pass</a> <a href="FreeC-IR-Syntax-Module.html#t:Module" title="FreeC.IR.Syntax.Module">Module</a> <a href="src/FreeC.Pass.CompletePatternPass.html#completePatternPass" class="link">Source</a> <a href="#v:completePatternPass" class="selflink">#</a></p><div class="doc"><p>Checks that all functions of a given module have complete pattern matching.</p><p>The pattern matching for a function is complete if for each <code>case</code>
   expression there exists exactly one case alternative for each constructor
   of the corresponding type.</p></div></div><div class="top"><p class="src"><a id="v:checkPatternFuncDecl" class="def">checkPatternFuncDecl</a> :: <a href="FreeC-IR-Syntax-FuncDecl.html#t:FuncDecl" title="FreeC.IR.Syntax.FuncDecl">FuncDecl</a> -&gt; <a href="FreeC-Monad-Converter.html#t:Converter" title="FreeC.Monad.Converter">Converter</a> () <a href="src/FreeC.Pass.CompletePatternPass.html#checkPatternFuncDecl" class="link">Source</a> <a href="#v:checkPatternFuncDecl" class="selflink">#</a></p><div class="doc"><p>Checks a function declaration for incomplete patterns.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>