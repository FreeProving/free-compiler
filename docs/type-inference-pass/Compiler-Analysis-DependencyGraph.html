<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Compiler.Analysis.DependencyGraph</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Compiler.Analysis.DependencyGraph.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">haskellToCoqCompiler-0.1.0.0: A Haskell to Coq compiler.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Compiler.Analysis.DependencyGraph</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Getters</a></li><li><a href="#g:2">Predicates</a></li><li><a href="#g:3">Constructors</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains functions to construct dependency graphs of
   Haskell declarations and modules. A dependency graph is a directed
   graph whose nodes are labeled with declarations. There is an edge
   from node <code>A</code> to <code>B</code> if the declaration of <code>A</code> depends on the declaration
   of <code>B</code> (i.e. in Coq <code>B</code> has to be defined before <code>A</code> or both have to be
   declared in the same sentence). The module dependency graph contains an
   edge from node <code>A</code> to <code>B</code> if the module of <code>A</code> contains an <code>import</code>
   declaration for the module of <code>B</code>.</p><p>The dependency graph does only contain defined top-level declarations
   (i.e. there are no nodes for build-in data types or operations and there
   are no nodes for local variables such as function parameters or variable
   patterns). However the entries of the dependency graph contain keys
   for predefined functions (but not local variables) and the special
   functions <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Prelude.html#v:error" title="Prelude">error</a></code> and <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Prelude.html#v:undefined" title="Prelude">undefined</a></code> that are used in error terms.</p><p>We distinguish between the type and function dependency graph.
   This is because in Haskell function declarations and type declarations
   live in separate scopes and we want to avoid name conflicts.
   Because we assume all type declarations to precede function declarations
   in the generated Coq code, this should not be a problem. For the same
   reason the function dependency graph does not include nodes for
   constructors (as always, the keys of used constructors are still present).</p><p>The construction of a dependency graph does not fail even if there are
   are undefined identifiers.</p><p>For debugging purposes dependency graphs can be converted to the DOT
   format such that they can be visualized using Graphviz
   (See <a href="https://www.graphviz.org/">https://www.graphviz.org/</a>).</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:DGKey">DGKey</a> = <a href="Compiler-IR-Syntax.html#t:QName" title="Compiler.IR.Syntax">QName</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:DGEntry">DGEntry</a> node = (node, <a href="Compiler-Analysis-DependencyGraph.html#t:DGKey" title="Compiler.Analysis.DependencyGraph">DGKey</a>, [<a href="Compiler-Analysis-DependencyGraph.html#t:DGKey" title="Compiler.Analysis.DependencyGraph">DGKey</a>])</li><li class="src short"><span class="keyword">data</span> <a href="#t:DependencyGraph">DependencyGraph</a> node = <a href="#v:DependencyGraph">DependencyGraph</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Graph" title="Data.Graph">Graph</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Vertex" title="Data.Graph">Vertex</a> -&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DGEntry" title="Compiler.Analysis.DependencyGraph">DGEntry</a> node) (<a href="Compiler-Analysis-DependencyGraph.html#t:DGKey" title="Compiler.Analysis.DependencyGraph">DGKey</a> -&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Vertex" title="Data.Graph">Vertex</a>)</li><li class="src short"><a href="#v:dependencyGraphEntries">dependencyGraphEntries</a> :: <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> node -&gt; [<a href="Compiler-Analysis-DependencyGraph.html#t:DGEntry" title="Compiler.Analysis.DependencyGraph">DGEntry</a> node]</li><li class="src short"><a href="#v:dependsDirectlyOn">dependsDirectlyOn</a> :: <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> node -&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DGKey" title="Compiler.Analysis.DependencyGraph">DGKey</a> -&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DGKey" title="Compiler.Analysis.DependencyGraph">DGKey</a> -&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:typeDependencyGraph">typeDependencyGraph</a> :: [<a href="Compiler-IR-Syntax.html#t:TypeDecl" title="Compiler.IR.Syntax">TypeDecl</a>] -&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> <a href="Compiler-IR-Syntax.html#t:TypeDecl" title="Compiler.IR.Syntax">TypeDecl</a></li><li class="src short"><a href="#v:funcDependencyGraph">funcDependencyGraph</a> :: [<a href="Compiler-IR-Syntax.html#t:FuncDecl" title="Compiler.IR.Syntax">FuncDecl</a>] -&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> <a href="Compiler-IR-Syntax.html#t:FuncDecl" title="Compiler.IR.Syntax">FuncDecl</a></li><li class="src short"><a href="#v:moduleDependencyGraph">moduleDependencyGraph</a> :: [<a href="Compiler-IR-Syntax.html#t:Module" title="Compiler.IR.Syntax">Module</a>] -&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> <a href="Compiler-IR-Syntax.html#t:Module" title="Compiler.IR.Syntax">Module</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DGKey" class="def">DGKey</a> = <a href="Compiler-IR-Syntax.html#t:QName" title="Compiler.IR.Syntax">QName</a> <a href="src/Compiler.Analysis.DependencyGraph.html#DGKey" class="link">Source</a> <a href="#t:DGKey" class="selflink">#</a></p><div class="doc"><p>Every node of the dependency graph is uniquely identified by a key.
   We use the Haskell identifiers and symbols to identify the nodes.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DGEntry" class="def">DGEntry</a> node = (node, <a href="Compiler-Analysis-DependencyGraph.html#t:DGKey" title="Compiler.Analysis.DependencyGraph">DGKey</a>, [<a href="Compiler-Analysis-DependencyGraph.html#t:DGKey" title="Compiler.Analysis.DependencyGraph">DGKey</a>]) <a href="src/Compiler.Analysis.DependencyGraph.html#DGEntry" class="link">Source</a> <a href="#t:DGEntry" class="selflink">#</a></p><div class="doc"><p>Every node (declaration) in a dependency graph is associated with a
   unique key (Haskell identifier) and a list of keys that identify the
   nodes this node depends on (adjacency list).</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DependencyGraph" class="def">DependencyGraph</a> node <a href="src/Compiler.Analysis.DependencyGraph.html#DependencyGraph" class="link">Source</a> <a href="#t:DependencyGraph" class="selflink">#</a></p><div class="doc"><p>A dependency graph is a directed graph whose nodes are Haskell
   declarations (Usually <code><a href="Compiler-IR-Syntax.html#t:TypeDecl" title="Compiler.IR.Syntax">TypeDecl</a></code> or <code><a href="Compiler-IR-Syntax.html#t:FuncDecl" title="Compiler.IR.Syntax">FuncDecl</a></code>). There is an edge
   from node <code>A</code> to node <code>B</code> if the declaration of <code>A</code> depends on <code>B</code>.</p><p>Nodes are identified by their Haskell identifier (See <code><a href="Compiler-Analysis-DependencyGraph.html#t:DGKey" title="Compiler.Analysis.DependencyGraph">DGKey</a></code>).
   Internally nodes are identified by a number (See <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Vertex" title="Data.Graph">Vertex</a></code>).</p><p>In addition to the actual <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Graph" title="Data.Graph">Graph</a></code> that stores the adjacency matrix
   of the internal identifiers, this tuple contains functions to convert
   between the internal and high level representation.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DependencyGraph" class="def">DependencyGraph</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Graph" title="Data.Graph">Graph</a></dfn><div class="doc"><p>The actual graph.</p></div></li><li><dfn class="src">(<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Vertex" title="Data.Graph">Vertex</a> -&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DGEntry" title="Compiler.Analysis.DependencyGraph">DGEntry</a> node)</dfn><div class="doc"><p>Gets an entry for a vertex of the graph.</p></div></li><li><dfn class="src">(<a href="Compiler-Analysis-DependencyGraph.html#t:DGKey" title="Compiler.Analysis.DependencyGraph">DGKey</a> -&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Vertex" title="Data.Graph">Vertex</a>)</dfn><div class="doc"><p>Gets the vertex of a node with the given key.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:DependencyGraph" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DependencyGraph:Pretty:1"></span> <a href="Compiler-Pretty.html#t:Pretty" title="Compiler.Pretty">Pretty</a> (<a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> node)</span> <a href="src/Compiler.Analysis.DependencyGraph.html#line-172" class="link">Source</a> <a href="#t:DependencyGraph" class="selflink">#</a></td><td class="doc"><p>Pretty instance that converts a dependency graph to the DOT format.</p></td></tr><tr><td colspan="2"><details id="i:id:DependencyGraph:Pretty:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Compiler-Analysis-DependencyGraph.html">Compiler.Analysis.DependencyGraph</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pretty">pretty</a> :: <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> node -&gt; <a href="Compiler-Pretty.html#t:Doc" title="Compiler.Pretty">Doc</a> <a href="#v:pretty" class="selflink">#</a></p><p class="src"><a href="#v:prettyList">prettyList</a> :: [<a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> node] -&gt; <a href="Compiler-Pretty.html#t:Doc" title="Compiler.Pretty">Doc</a> <a href="#v:prettyList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:1" id="g:1"><h1>Getters</h1></a><div class="top"><p class="src"><a id="v:dependencyGraphEntries" class="def">dependencyGraphEntries</a> :: <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> node -&gt; [<a href="Compiler-Analysis-DependencyGraph.html#t:DGEntry" title="Compiler.Analysis.DependencyGraph">DGEntry</a> node] <a href="src/Compiler.Analysis.DependencyGraph.html#dependencyGraphEntries" class="link">Source</a> <a href="#v:dependencyGraphEntries" class="selflink">#</a></p><div class="doc"><p>Gets the entries of the given dependency graph.</p></div></div><a href="#g:2" id="g:2"><h1>Predicates</h1></a><div class="top"><p class="src"><a id="v:dependsDirectlyOn" class="def">dependsDirectlyOn</a> <a href="src/Compiler.Analysis.DependencyGraph.html#dependsDirectlyOn" class="link">Source</a> <a href="#v:dependsDirectlyOn" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> node</td><td class="doc"><p>The dependency graph.</p></td></tr><tr><td class="src">-&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DGKey" title="Compiler.Analysis.DependencyGraph">DGKey</a></td><td class="doc"><p>The key of the first node.</p></td></tr><tr><td class="src">-&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DGKey" title="Compiler.Analysis.DependencyGraph">DGKey</a></td><td class="doc"><p>The key of the second node.</p></td></tr><tr><td class="src">-&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Tests whether two nodes (identified by the given keys) of the dependency
   graph depend on each other directly (i.e., there is an edge from the
   first node to the second node).</p><p>Returns <code>False</code> if one of the nodes does not exist.</p></div></div><a href="#g:3" id="g:3"><h1>Constructors</h1></a><div class="top"><p class="src"><a id="v:typeDependencyGraph" class="def">typeDependencyGraph</a> :: [<a href="Compiler-IR-Syntax.html#t:TypeDecl" title="Compiler.IR.Syntax">TypeDecl</a>] -&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> <a href="Compiler-IR-Syntax.html#t:TypeDecl" title="Compiler.IR.Syntax">TypeDecl</a> <a href="src/Compiler.Analysis.DependencyGraph.html#typeDependencyGraph" class="link">Source</a> <a href="#v:typeDependencyGraph" class="selflink">#</a></p><div class="doc"><p>Creates the dependency graph for a list of data type or type synonym
   declarations.</p></div></div><div class="top"><p class="src"><a id="v:funcDependencyGraph" class="def">funcDependencyGraph</a> :: [<a href="Compiler-IR-Syntax.html#t:FuncDecl" title="Compiler.IR.Syntax">FuncDecl</a>] -&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> <a href="Compiler-IR-Syntax.html#t:FuncDecl" title="Compiler.IR.Syntax">FuncDecl</a> <a href="src/Compiler.Analysis.DependencyGraph.html#funcDependencyGraph" class="link">Source</a> <a href="#v:funcDependencyGraph" class="selflink">#</a></p><div class="doc"><p>Creates the dependency graph for a list of function declarations.</p></div></div><div class="top"><p class="src"><a id="v:moduleDependencyGraph" class="def">moduleDependencyGraph</a> :: [<a href="Compiler-IR-Syntax.html#t:Module" title="Compiler.IR.Syntax">Module</a>] -&gt; <a href="Compiler-Analysis-DependencyGraph.html#t:DependencyGraph" title="Compiler.Analysis.DependencyGraph">DependencyGraph</a> <a href="Compiler-IR-Syntax.html#t:Module" title="Compiler.IR.Syntax">Module</a> <a href="src/Compiler.Analysis.DependencyGraph.html#moduleDependencyGraph" class="link">Source</a> <a href="#v:moduleDependencyGraph" class="selflink">#</a></p><div class="doc"><p>Creates the dependency graph for a list of Haskell modules.</p><p>Modules without a name are excluded from the dependency graph.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>