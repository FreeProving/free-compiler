<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Compiler.Frontend.Haskell.Simplifier</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Compiler.Frontend.Haskell.Simplifier.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">free-compiler-0.1.0.0: A Haskell to Coq compiler.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Compiler.Frontend.Haskell.Simplifier</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains a converter from the <code>haskell-src-exts</code> AST to
   the intermediate representation used by the compiler.</p><p>The simplifier checks whether a given module complies with our assumptions
   about the input file format and generates a fatal error message if
   any Haskell feature is used that is not supported by the compiler.</p><p>In some places the simplifier also performs desugaring. For example,
   infix operators are translated to regular function applications and
   list literals to the application of the list constructors.</p><p>TODO warn user if reserved names like <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Prelude.html#v:error" title="Prelude">error</a></code> or <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Prelude.html#v:undefined" title="Prelude">undefined</a></code> are used
       in declarations or as (type-) variable names.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:Simplifier">Simplifier</a> = <a href="Compiler-Monad-Converter.html#t:Converter" title="Compiler.Monad.Converter">Converter</a></li><li class="src short"><a href="#v:simplifyModuleWithComments">simplifyModuleWithComments</a> :: Module <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a> -&gt; [<a href="Compiler-IR-Syntax.html#t:Comment" title="Compiler.IR.Syntax">Comment</a>] -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> <a href="Compiler-IR-Syntax.html#t:Module" title="Compiler.IR.Syntax">Module</a></li><li class="src short"><a href="#v:extractModName">extractModName</a> :: Module <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a> -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> <a href="Compiler-IR-Syntax.html#t:ModName" title="Compiler.IR.Syntax">ModName</a></li><li class="src short"><a href="#v:simplifyDecls">simplifyDecls</a> :: [Decl <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a>] -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> ([<a href="Compiler-IR-Syntax.html#t:TypeDecl" title="Compiler.IR.Syntax">TypeDecl</a>], [<a href="Compiler-IR-Syntax.html#t:TypeSig" title="Compiler.IR.Syntax">TypeSig</a>], [<a href="Compiler-IR-Syntax.html#t:FuncDecl" title="Compiler.IR.Syntax">FuncDecl</a>])</li><li class="src short"><a href="#v:simplifyType">simplifyType</a> :: Type <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a> -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> <a href="Compiler-IR-Syntax.html#t:Type" title="Compiler.IR.Syntax">Type</a></li><li class="src short"><a href="#v:simplifyTypeSchema">simplifyTypeSchema</a> :: Type <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a> -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> <a href="Compiler-IR-Syntax.html#t:TypeSchema" title="Compiler.IR.Syntax">TypeSchema</a></li><li class="src short"><a href="#v:simplifyExpr">simplifyExpr</a> :: Exp <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a> -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> <a href="Compiler-IR-Syntax.html#t:Expr" title="Compiler.IR.Syntax">Expr</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Simplifier" class="def">Simplifier</a> = <a href="Compiler-Monad-Converter.html#t:Converter" title="Compiler.Monad.Converter">Converter</a> <a href="src/Compiler.Frontend.Haskell.Simplifier.html#Simplifier" class="link">Source</a> <a href="#t:Simplifier" class="selflink">#</a></p><div class="doc"><p>The simplifier is a special converter that converts the haskell<code>-src-exts</code>
   AST to the simplified internal representation for Haskell modules.</p><p>During simplification the environment is usually empty (except for fresh
   variables created by the simplifier).</p></div></div><div class="top"><p class="src"><a id="v:simplifyModuleWithComments" class="def">simplifyModuleWithComments</a> :: Module <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a> -&gt; [<a href="Compiler-IR-Syntax.html#t:Comment" title="Compiler.IR.Syntax">Comment</a>] -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> <a href="Compiler-IR-Syntax.html#t:Module" title="Compiler.IR.Syntax">Module</a> <a href="src/Compiler.Frontend.Haskell.Simplifier.html#simplifyModuleWithComments" class="link">Source</a> <a href="#v:simplifyModuleWithComments" class="selflink">#</a></p><div class="doc"><p>Simplifies a module declaration.</p><p>The module must not contain any import declaration or pragmas. The export
   list may be present but is ignored.</p><p>Only regular (non XML) modules are supported.</p></div></div><div class="top"><p class="src"><a id="v:extractModName" class="def">extractModName</a> :: Module <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a> -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> <a href="Compiler-IR-Syntax.html#t:ModName" title="Compiler.IR.Syntax">ModName</a> <a href="src/Compiler.Frontend.Haskell.Simplifier.html#extractModName" class="link">Source</a> <a href="#v:extractModName" class="selflink">#</a></p><div class="doc"><p>Gets the name of the given module.</p></div></div><div class="top"><p class="src"><a id="v:simplifyDecls" class="def">simplifyDecls</a> :: [Decl <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a>] -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> ([<a href="Compiler-IR-Syntax.html#t:TypeDecl" title="Compiler.IR.Syntax">TypeDecl</a>], [<a href="Compiler-IR-Syntax.html#t:TypeSig" title="Compiler.IR.Syntax">TypeSig</a>], [<a href="Compiler-IR-Syntax.html#t:FuncDecl" title="Compiler.IR.Syntax">FuncDecl</a>]) <a href="src/Compiler.Frontend.Haskell.Simplifier.html#simplifyDecls" class="link">Source</a> <a href="#v:simplifyDecls" class="selflink">#</a></p><div class="doc"><p>Simplifies the given declarations.</p></div></div><div class="top"><p class="src"><a id="v:simplifyType" class="def">simplifyType</a> :: Type <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a> -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> <a href="Compiler-IR-Syntax.html#t:Type" title="Compiler.IR.Syntax">Type</a> <a href="src/Compiler.Frontend.Haskell.Simplifier.html#simplifyType" class="link">Source</a> <a href="#v:simplifyType" class="selflink">#</a></p><div class="doc"><p>Simplifies the a type expression.</p></div></div><div class="top"><p class="src"><a id="v:simplifyTypeSchema" class="def">simplifyTypeSchema</a> :: Type <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a> -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> <a href="Compiler-IR-Syntax.html#t:TypeSchema" title="Compiler.IR.Syntax">TypeSchema</a> <a href="src/Compiler.Frontend.Haskell.Simplifier.html#simplifyTypeSchema" class="link">Source</a> <a href="#v:simplifyTypeSchema" class="selflink">#</a></p><div class="doc"><p>Simplifies the given type expression and abstracts it to a type schema.</p><p>If there is no explicit <code>forall</code>, all type variables that occur in the
   type expression are abstracted aw. Otherwise, only the specified type
   arguments are abstracted.</p></div></div><div class="top"><p class="src"><a id="v:simplifyExpr" class="def">simplifyExpr</a> :: Exp <a href="Compiler-IR-SrcSpan.html#t:SrcSpan" title="Compiler.IR.SrcSpan">SrcSpan</a> -&gt; <a href="Compiler-Frontend-Haskell-Simplifier.html#t:Simplifier" title="Compiler.Frontend.Haskell.Simplifier">Simplifier</a> <a href="Compiler-IR-Syntax.html#t:Expr" title="Compiler.IR.Syntax">Expr</a> <a href="src/Compiler.Frontend.Haskell.Simplifier.html#simplifyExpr" class="link">Source</a> <a href="#v:simplifyExpr" class="selflink">#</a></p><div class="doc"><p>Simplifies an expression.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>