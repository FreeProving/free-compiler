<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>FreeC.IR.DependencyGraph</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/FreeC.IR.DependencyGraph.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">free-compiler-0.2.0.0: A Haskell to Coq compiler.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">FreeC.IR.DependencyGraph</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Dependency Graph</a><ul><li><a href="#g:2">Getters</a></li><li><a href="#g:3">Predicates</a></li><li><a href="#g:4">Constructors</a></li></ul></li><li><a href="#g:5">Strongly Connected Components</a><ul><li><a href="#g:6">Constructors</a></li><li><a href="#g:7">Manipulating</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains functions to construct dependency graphs of
   declarations and modules of the intermediate language. A dependency graph
   is a directed graph whose nodes are labeled with declarations. There is an
   edge from node <code>A</code> to <code>B</code> if the declaration of <code>A</code> depends on the
   declaration of <code>B</code> (i.e. in Coq <code>B</code> has to be defined before <code>A</code> or both
   have to be declared in the same sentence). The module dependency graph
   contains an edge from node <code>A</code> to <code>B</code> if the module of <code>A</code> contains an
   <code>import</code> declaration for the module of <code>B</code>.</p><p>The dependency graph does only contain defined top-level declarations
   (i.e. there are no nodes for imported or built-in data types or operations
   and there are no nodes for local variables such as function parameters or
   variable patterns). However, the entries of the dependency graph contain
   keys for predefined functions (but not local variables) as well as the
   special functions <code>error</code> and <code>undefined</code> that are used in error terms.</p><p>We distinguish between the type and value dependency graph.
   This is because function declarations and type declarations
   live in separate scopes but we want to avoid name conflicts.
   Since we assume all type declarations to precede function declarations
   in the generated Coq code, this separation of the dependency graphs
   should not be a problem. For the same reason, the value dependency
   graph does not include nodes for constructors (as always, the keys of
   used constructors are still present).</p><p>The construction of a dependency graph does not fail even if there are
   are undefined identifiers. The dependency graph does not know about the
   environment, it only knows which (type) constructors and (type) variables
   occur freely in the declarations. Most importantly, that means that it
   does not know about the module system. Thus, dependency analysis should
   not be performed before all references have been resolved to their
   original (qualified) identifiers.</p><p>For debugging purposes, dependency graphs can be converted to the DOT
   format such that they can be visualized using Graphviz
   (See <a href="https://www.graphviz.org/">https://www.graphviz.org/</a>).</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:DGKey">DGKey</a> = <a href="FreeC-IR-Syntax-Name.html#t:QName" title="FreeC.IR.Syntax.Name">QName</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:DGEntry">DGEntry</a> node = (node, <a href="FreeC-IR-DependencyGraph.html#t:DGKey" title="FreeC.IR.DependencyGraph">DGKey</a>, [<a href="FreeC-IR-DependencyGraph.html#t:DGKey" title="FreeC.IR.DependencyGraph">DGKey</a>])</li><li class="src short"><span class="keyword">data</span> <a href="#t:DependencyGraph">DependencyGraph</a> node = <a href="#v:DependencyGraph">DependencyGraph</a> {<ul class="subs"><li><a href="#v:dgGraph">dgGraph</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Graph" title="Data.Graph">Graph</a></li><li><a href="#v:dgGetEntry">dgGetEntry</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Vertex" title="Data.Graph">Vertex</a> -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DGEntry" title="FreeC.IR.DependencyGraph">DGEntry</a> node</li><li><a href="#v:dgGetVertex">dgGetVertex</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DGKey" title="FreeC.IR.DependencyGraph">DGKey</a> -&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Vertex" title="Data.Graph">Vertex</a></li></ul>}</li><li class="src short"><a href="#v:dgEntries">dgEntries</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> node -&gt; [<a href="FreeC-IR-DependencyGraph.html#t:DGEntry" title="FreeC.IR.DependencyGraph">DGEntry</a> node]</li><li class="src short"><a href="#v:dependsDirectlyOn">dependsDirectlyOn</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> node -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DGKey" title="FreeC.IR.DependencyGraph">DGKey</a> -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DGKey" title="FreeC.IR.DependencyGraph">DGKey</a> -&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:typeDependencyGraph">typeDependencyGraph</a> :: (<a href="FreeC-IR-Reference.html#t:HasRefs" title="FreeC.IR.Reference">HasRefs</a> node, <a href="FreeC-IR-Syntax-Name.html#t:HasDeclIdent" title="FreeC.IR.Syntax.Name">HasDeclIdent</a> node) =&gt; [node] -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> node</li><li class="src short"><a href="#v:valueDependencyGraph">valueDependencyGraph</a> :: (<a href="FreeC-IR-Reference.html#t:HasRefs" title="FreeC.IR.Reference">HasRefs</a> node, <a href="FreeC-IR-Syntax-Name.html#t:HasDeclIdent" title="FreeC.IR.Syntax.Name">HasDeclIdent</a> node) =&gt; [node] -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> node</li><li class="src short"><a href="#v:moduleDependencyGraph">moduleDependencyGraph</a> :: [<a href="FreeC-IR-Syntax-Module.html#t:ModuleOf" title="FreeC.IR.Syntax.Module">ModuleOf</a> decls] -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> (<a href="FreeC-IR-Syntax-Module.html#t:ModuleOf" title="FreeC.IR.Syntax.Module">ModuleOf</a> decls)</li><li class="src short"><span class="keyword">data</span> <a href="#t:DependencyComponent">DependencyComponent</a> decl<ul class="subs"><li>= <a href="#v:NonRecursive">NonRecursive</a> decl</li><li>| <a href="#v:Recursive">Recursive</a> [decl]</li></ul></li><li class="src short"><a href="#v:unwrapComponent">unwrapComponent</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl -&gt; [decl]</li><li class="src short"><a href="#v:dependencyComponents">dependencyComponents</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> a -&gt; [<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> a]</li><li class="src short"><a href="#v:typeDependencyComponents">typeDependencyComponents</a> :: (<a href="FreeC-IR-Reference.html#t:HasRefs" title="FreeC.IR.Reference">HasRefs</a> node, <a href="FreeC-IR-Syntax-Name.html#t:HasDeclIdent" title="FreeC.IR.Syntax.Name">HasDeclIdent</a> node) =&gt; [node] -&gt; [<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> node]</li><li class="src short"><a href="#v:valueDependencyComponents">valueDependencyComponents</a> :: (<a href="FreeC-IR-Reference.html#t:HasRefs" title="FreeC.IR.Reference">HasRefs</a> node, <a href="FreeC-IR-Syntax-Name.html#t:HasDeclIdent" title="FreeC.IR.Syntax.Name">HasDeclIdent</a> node) =&gt; [node] -&gt; [<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> node]</li><li class="src short"><a href="#v:groupModules">groupModules</a> :: [<a href="FreeC-IR-Syntax-Module.html#t:ModuleOf" title="FreeC.IR.Syntax.Module">ModuleOf</a> decls] -&gt; [<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> (<a href="FreeC-IR-Syntax-Module.html#t:ModuleOf" title="FreeC.IR.Syntax.Module">ModuleOf</a> decls)]</li><li class="src short"><a href="#v:mapComponent">mapComponent</a> :: ([decl] -&gt; [decl']) -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl'</li><li class="src short"><a href="#v:mapComponentM">mapComponentM</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> m =&gt; ([decl] -&gt; m [decl']) -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl -&gt; m (<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl')</li><li class="src short"><a href="#v:mapComponentM_">mapComponentM_</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> m =&gt; ([decl] -&gt; m a) -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl -&gt; m ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Dependency Graph</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DGKey" class="def">DGKey</a> = <a href="FreeC-IR-Syntax-Name.html#t:QName" title="FreeC.IR.Syntax.Name">QName</a> <a href="src/FreeC.IR.DependencyGraph.html#DGKey" class="link">Source</a> <a href="#t:DGKey" class="selflink">#</a></p><div class="doc"><p>Every node of the dependency graph is uniquely identified by a key.
   We use their qualified original name to identify declarations.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DGEntry" class="def">DGEntry</a> node = (node, <a href="FreeC-IR-DependencyGraph.html#t:DGKey" title="FreeC.IR.DependencyGraph">DGKey</a>, [<a href="FreeC-IR-DependencyGraph.html#t:DGKey" title="FreeC.IR.DependencyGraph">DGKey</a>]) <a href="src/FreeC.IR.DependencyGraph.html#DGEntry" class="link">Source</a> <a href="#t:DGEntry" class="selflink">#</a></p><div class="doc"><p>Every node (i.e., declaration) in a dependency graph is associated with a
   unique key (its qualified original name) and a list of keys that identify
   the nodes this node depends on (adjacency list).</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DependencyGraph" class="def">DependencyGraph</a> node <a href="src/FreeC.IR.DependencyGraph.html#DependencyGraph" class="link">Source</a> <a href="#t:DependencyGraph" class="selflink">#</a></p><div class="doc"><p>A dependency graph is a directed graph whose nodes are declarations
   (Usually <code><a href="FreeC-IR-Syntax-TypeDecl.html#t:TypeDecl" title="FreeC.IR.Syntax.TypeDecl">TypeDecl</a></code> or <code><a href="FreeC-IR-Syntax-FuncDecl.html#t:FuncDecl" title="FreeC.IR.Syntax.FuncDecl">FuncDecl</a></code>). There is an edge from node
   <code>A</code> to node <code>B</code> if the declaration of <code>A</code> depends on <code>B</code>.</p><p>Nodes are identified by their qualified original name (See <code><a href="FreeC-IR-DependencyGraph.html#t:DGKey" title="FreeC.IR.DependencyGraph">DGKey</a></code>).
   Internally, nodes are identified by a number (See <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Vertex" title="Data.Graph">Vertex</a></code>).</p><p>In addition to the actual <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Graph" title="Data.Graph">Graph</a></code> that stores the adjacency matrix
   of the internal identifiers, this data type contains functions to convert
   between the internal and high level representation.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DependencyGraph" class="def">DependencyGraph</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:dgGraph" class="def">dgGraph</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Graph" title="Data.Graph">Graph</a></dfn><div class="doc"><p>The actual graph.</p></div></li><li><dfn class="src"><a id="v:dgGetEntry" class="def">dgGetEntry</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Vertex" title="Data.Graph">Vertex</a> -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DGEntry" title="FreeC.IR.DependencyGraph">DGEntry</a> node</dfn><div class="doc"><p>Gets an entry for a vertex of the graph.</p></div></li><li><dfn class="src"><a id="v:dgGetVertex" class="def">dgGetVertex</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DGKey" title="FreeC.IR.DependencyGraph">DGKey</a> -&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:Vertex" title="Data.Graph">Vertex</a></dfn><div class="doc"><p>Gets the vertex of a node with the given key.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:DependencyGraph" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DependencyGraph:Pretty:1"></span> <a href="FreeC-Pretty.html#t:Pretty" title="FreeC.Pretty">Pretty</a> (<a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> node)</span> <a href="src/FreeC.IR.DependencyGraph.html#line-187" class="link">Source</a> <a href="#t:DependencyGraph" class="selflink">#</a></td><td class="doc"><p>Pretty instance that converts a dependency graph to the DOT format.</p></td></tr><tr><td colspan="2"><details id="i:id:DependencyGraph:Pretty:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="FreeC-IR-DependencyGraph.html">FreeC.IR.DependencyGraph</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pretty">pretty</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> node -&gt; <a href="FreeC-Pretty.html#t:Doc" title="FreeC.Pretty">Doc</a> <a href="#v:pretty" class="selflink">#</a></p><p class="src"><a href="#v:prettyList">prettyList</a> :: [<a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> node] -&gt; <a href="FreeC-Pretty.html#t:Doc" title="FreeC.Pretty">Doc</a> <a href="#v:prettyList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h2>Getters</h2></a><div class="top"><p class="src"><a id="v:dgEntries" class="def">dgEntries</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> node -&gt; [<a href="FreeC-IR-DependencyGraph.html#t:DGEntry" title="FreeC.IR.DependencyGraph">DGEntry</a> node] <a href="src/FreeC.IR.DependencyGraph.html#dgEntries" class="link">Source</a> <a href="#v:dgEntries" class="selflink">#</a></p><div class="doc"><p>Gets the entries of the given dependency graph.</p></div></div><a href="#g:3" id="g:3"><h2>Predicates</h2></a><div class="top"><p class="src"><a id="v:dependsDirectlyOn" class="def">dependsDirectlyOn</a> <a href="src/FreeC.IR.DependencyGraph.html#dependsDirectlyOn" class="link">Source</a> <a href="#v:dependsDirectlyOn" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> node</td><td class="doc"><p>The dependency graph.</p></td></tr><tr><td class="src">-&gt; <a href="FreeC-IR-DependencyGraph.html#t:DGKey" title="FreeC.IR.DependencyGraph">DGKey</a></td><td class="doc"><p>The key of the first node.</p></td></tr><tr><td class="src">-&gt; <a href="FreeC-IR-DependencyGraph.html#t:DGKey" title="FreeC.IR.DependencyGraph">DGKey</a></td><td class="doc"><p>The key of the second node.</p></td></tr><tr><td class="src">-&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Tests whether two nodes (identified by the given keys) of the dependency
   graph depend on each other directly (i.e., there is an edge from the
   first node to the second node).</p><p>Returns <code>False</code> if one of the nodes does not exist.</p></div></div><a href="#g:4" id="g:4"><h2>Constructors</h2></a><div class="top"><p class="src"><a id="v:typeDependencyGraph" class="def">typeDependencyGraph</a> :: (<a href="FreeC-IR-Reference.html#t:HasRefs" title="FreeC.IR.Reference">HasRefs</a> node, <a href="FreeC-IR-Syntax-Name.html#t:HasDeclIdent" title="FreeC.IR.Syntax.Name">HasDeclIdent</a> node) =&gt; [node] -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> node <a href="src/FreeC.IR.DependencyGraph.html#typeDependencyGraph" class="link">Source</a> <a href="#v:typeDependencyGraph" class="selflink">#</a></p><div class="doc"><p>Creates the type dependency graph for a list of nodes.</p></div></div><div class="top"><p class="src"><a id="v:valueDependencyGraph" class="def">valueDependencyGraph</a> :: (<a href="FreeC-IR-Reference.html#t:HasRefs" title="FreeC.IR.Reference">HasRefs</a> node, <a href="FreeC-IR-Syntax-Name.html#t:HasDeclIdent" title="FreeC.IR.Syntax.Name">HasDeclIdent</a> node) =&gt; [node] -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> node <a href="src/FreeC.IR.DependencyGraph.html#valueDependencyGraph" class="link">Source</a> <a href="#v:valueDependencyGraph" class="selflink">#</a></p><div class="doc"><p>Creates the dependency graph for a list of function declarations.</p></div></div><div class="top"><p class="src"><a id="v:moduleDependencyGraph" class="def">moduleDependencyGraph</a> :: [<a href="FreeC-IR-Syntax-Module.html#t:ModuleOf" title="FreeC.IR.Syntax.Module">ModuleOf</a> decls] -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> (<a href="FreeC-IR-Syntax-Module.html#t:ModuleOf" title="FreeC.IR.Syntax.Module">ModuleOf</a> decls) <a href="src/FreeC.IR.DependencyGraph.html#moduleDependencyGraph" class="link">Source</a> <a href="#v:moduleDependencyGraph" class="selflink">#</a></p><div class="doc"><p>Creates the dependency graph for the given modules.</p></div></div><a href="#g:5" id="g:5"><h1>Strongly Connected Components</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DependencyComponent" class="def">DependencyComponent</a> decl <a href="src/FreeC.IR.DependencyGraph.html#DependencyComponent" class="link">Source</a> <a href="#t:DependencyComponent" class="selflink">#</a></p><div class="doc"><p>A strongly connected component of the dependency graph.</p><p>All declarations that mutually depend on each other are in the same
   strongly connected component.</p><p>The only difference to <code><code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Graph.html#t:SCC" title="Data.Graph">SCC</a></code> decl</code> is that the constructors have been
   renamed to be more explanatory in the context of dependency analysis.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NonRecursive" class="def">NonRecursive</a> decl</td><td class="doc"><p>A single non-recursive declaration.</p></td></tr><tr><td class="src"><a id="v:Recursive" class="def">Recursive</a> [decl]</td><td class="doc"><p>A list of mutually recursive declarations.</p></td></tr></table></div><div class="subs instances"><details id="i:DependencyComponent" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DependencyComponent:Show:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> decl =&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl)</span> <a href="src/FreeC.IR.DependencyGraph.html#line-245" class="link">Source</a> <a href="#t:DependencyComponent" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DependencyComponent:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="FreeC-IR-DependencyGraph.html">FreeC.IR.DependencyGraph</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl -&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl -&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl] -&gt; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DependencyComponent:Pretty:2"></span> <a href="FreeC-Pretty.html#t:Pretty" title="FreeC.Pretty">Pretty</a> decl =&gt; <a href="FreeC-Pretty.html#t:Pretty" title="FreeC.Pretty">Pretty</a> (<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl)</span> <a href="src/FreeC.IR.DependencyGraph.html#line-346" class="link">Source</a> <a href="#t:DependencyComponent" class="selflink">#</a></td><td class="doc"><p>Pretty instance that pretty prints the declarations of a strongly
   connected component.</p><p>Each declaration is on its own line and indented by two spaces.
   The first line of the document indicates whether the component
   was recursive or not.</p></td></tr><tr><td colspan="2"><details id="i:id:DependencyComponent:Pretty:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="FreeC-IR-DependencyGraph.html">FreeC.IR.DependencyGraph</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pretty">pretty</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl -&gt; <a href="FreeC-Pretty.html#t:Doc" title="FreeC.Pretty">Doc</a> <a href="#v:pretty" class="selflink">#</a></p><p class="src"><a href="#v:prettyList">prettyList</a> :: [<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl] -&gt; <a href="FreeC-Pretty.html#t:Doc" title="FreeC.Pretty">Doc</a> <a href="#v:prettyList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:unwrapComponent" class="def">unwrapComponent</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl -&gt; [decl] <a href="src/FreeC.IR.DependencyGraph.html#unwrapComponent" class="link">Source</a> <a href="#v:unwrapComponent" class="selflink">#</a></p><div class="doc"><p>Gets the declarations wrapped by the given strongly connected component.</p></div></div><a href="#g:6" id="g:6"><h2>Constructors</h2></a><div class="top"><p class="src"><a id="v:dependencyComponents" class="def">dependencyComponents</a> :: <a href="FreeC-IR-DependencyGraph.html#t:DependencyGraph" title="FreeC.IR.DependencyGraph">DependencyGraph</a> a -&gt; [<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> a] <a href="src/FreeC.IR.DependencyGraph.html#dependencyComponents" class="link">Source</a> <a href="#v:dependencyComponents" class="selflink">#</a></p><div class="doc"><p>Computes the strongly connected components of the given dependency graph.</p><p>Each strongly connected component corresponds either to a set of mutually
   recursive declarations or a single non-recursive declaration.</p><p>The returned list of strongly connected components is in reverse
   topological order, i.e. if any declaration in a strongly connected
   component <code>B</code> depends on a declaration in a strongly connected component
   <code>A</code>, then <code>A</code> precedes <code>B</code> in the returned list.</p><p>If two components do not depend on each other, they are in reverse
   alphabetical order.</p></div></div><div class="top"><p class="src"><a id="v:typeDependencyComponents" class="def">typeDependencyComponents</a> :: (<a href="FreeC-IR-Reference.html#t:HasRefs" title="FreeC.IR.Reference">HasRefs</a> node, <a href="FreeC-IR-Syntax-Name.html#t:HasDeclIdent" title="FreeC.IR.Syntax.Name">HasDeclIdent</a> node) =&gt; [node] -&gt; [<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> node] <a href="src/FreeC.IR.DependencyGraph.html#typeDependencyComponents" class="link">Source</a> <a href="#v:typeDependencyComponents" class="selflink">#</a></p><div class="doc"><p>Combines the construction of the type dependency graph with the
   computation of strongly connected components.</p></div></div><div class="top"><p class="src"><a id="v:valueDependencyComponents" class="def">valueDependencyComponents</a> :: (<a href="FreeC-IR-Reference.html#t:HasRefs" title="FreeC.IR.Reference">HasRefs</a> node, <a href="FreeC-IR-Syntax-Name.html#t:HasDeclIdent" title="FreeC.IR.Syntax.Name">HasDeclIdent</a> node) =&gt; [node] -&gt; [<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> node] <a href="src/FreeC.IR.DependencyGraph.html#valueDependencyComponents" class="link">Source</a> <a href="#v:valueDependencyComponents" class="selflink">#</a></p><div class="doc"><p>Combines the construction of the value dependency graph with the
   computation of strongly connected components.</p></div></div><div class="top"><p class="src"><a id="v:groupModules" class="def">groupModules</a> :: [<a href="FreeC-IR-Syntax-Module.html#t:ModuleOf" title="FreeC.IR.Syntax.Module">ModuleOf</a> decls] -&gt; [<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> (<a href="FreeC-IR-Syntax-Module.html#t:ModuleOf" title="FreeC.IR.Syntax.Module">ModuleOf</a> decls)] <a href="src/FreeC.IR.DependencyGraph.html#groupModules" class="link">Source</a> <a href="#v:groupModules" class="selflink">#</a></p><div class="doc"><p>Combines the construction of the dependency graph for the given
   modules (See <code><a href="FreeC-IR-DependencyGraph.html#v:moduleDependencyGraph" title="FreeC.IR.DependencyGraph">moduleDependencyGraph</a></code>) with the computation of strongly
   connected components.</p><p>Since cyclic module dependencies are not allowed, all
   <code><a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a></code>s in the returned list should be <code><a href="FreeC-IR-DependencyGraph.html#v:NonRecursive" title="FreeC.IR.DependencyGraph">NonRecursive</a></code>.
   Otherwise, there is a module dependency error.</p></div></div><a href="#g:7" id="g:7"><h2>Manipulating</h2></a><div class="top"><p class="src"><a id="v:mapComponent" class="def">mapComponent</a> :: ([decl] -&gt; [decl']) -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl' <a href="src/FreeC.IR.DependencyGraph.html#mapComponent" class="link">Source</a> <a href="#v:mapComponent" class="selflink">#</a></p><div class="doc"><p>Applies the given function to the declarations in the given strongly
   connected component of the dependency graph.</p><p>In case of a <code><a href="FreeC-IR-DependencyGraph.html#v:NonRecursive" title="FreeC.IR.DependencyGraph">NonRecursive</a></code> component, the function is given a singleton
   list. The given function must not change the number of declarations in the
   component.</p></div></div><div class="top"><p class="src"><a id="v:mapComponentM" class="def">mapComponentM</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> m =&gt; ([decl] -&gt; m [decl']) -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl -&gt; m (<a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl') <a href="src/FreeC.IR.DependencyGraph.html#mapComponentM" class="link">Source</a> <a href="#v:mapComponentM" class="selflink">#</a></p><div class="doc"><p>Monadic version of <code><a href="FreeC-IR-DependencyGraph.html#v:mapComponent" title="FreeC.IR.DependencyGraph">mapComponent</a></code>.</p><p>There must be a <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a></code> instance since this function fails if the
   given function changes the number of declarations in a non-recursive
   strongly connected component.</p></div></div><div class="top"><p class="src"><a id="v:mapComponentM_" class="def">mapComponentM_</a> :: <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> m =&gt; ([decl] -&gt; m a) -&gt; <a href="FreeC-IR-DependencyGraph.html#t:DependencyComponent" title="FreeC.IR.DependencyGraph">DependencyComponent</a> decl -&gt; m () <a href="src/FreeC.IR.DependencyGraph.html#mapComponentM_" class="link">Source</a> <a href="#v:mapComponentM_" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="FreeC-IR-DependencyGraph.html#v:mapComponentM" title="FreeC.IR.DependencyGraph">mapComponentM</a></code> but discards the result.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>